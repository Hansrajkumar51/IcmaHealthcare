<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>IMCA Admin — Professional UI</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
<style>
  /* ---------------- Root tokens ---------------- */
  :root{
    --bg:#f4f6f8;
    --card:#ffffff;
    --brand-1:#0d6efd;
    --brand-2:#0a58ca;
    --glass: rgba(255,255,255,0.6);
    --muted:#6b7280;
    --success:#16a34a;
    --danger:#dc2626;
    --warning:#f59e0b;
    --radius:12px;
    --shadow: 0 10px 30px rgba(2,6,23,0.08);
    --mono: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  }
  *{box-sizing:border-box}
  body{
    font-family:var(--mono);
    margin:0;
    min-height:100vh;
    background: linear-gradient(180deg,#f6f8fb,#eef3f9);
    color:#0f172a;
    display:flex;
    gap:18px;
    padding:18px;
  }

  /* ---------------- Sidebar ---------------- */
  aside.sidebar{
    width:260px;
    background: linear-gradient(180deg,var(--brand-1),var(--brand-2));
    color:#fff;
    border-radius:14px;
    padding:18px;
    display:flex;
    flex-direction:column;
    gap:14px;
    transition: width .26s ease, box-shadow .18s;
    box-shadow:var(--shadow);
  }
  aside.sidebar.collapsed{ width:76px; }
  .logo{ display:flex; align-items:center; gap:12px; }
  .logo img{ height:40px; width:auto; border-radius:6px; background:#fff; padding:4px; }
  .logo .brand{ font-weight:800; font-size:18px; letter-spacing:0.4px; }
  .sidebar.collapsed .brand{ display:none; }
  nav.nav{ display:flex; flex-direction:column; gap:8px; margin-top:8px; flex:1; }
  .nav-item{
    display:flex; gap:12px; align-items:center; padding:12px; border-radius:10px;
    cursor:pointer; transition: background .12s, transform .06s;
    white-space:nowrap; overflow:hidden;
  }
  .nav-item i{ width:20px; text-align:center; font-size:16px }
  .nav-item span{ font-weight:600; }
  .nav-item:hover{ background: rgba(255,255,255,0.08); transform: translateY(-1px) }
  .nav-item.active{ background: rgba(255,255,255,0.12); }

  .sidebar-footer{ display:flex; justify-content:center; color:rgba(255,255,255,0.9); font-size:13px; }

  .nav-item .tooltip{
    display:none;
    position:absolute;
    left:86px;
    background:#fff;
    color:#111;
    padding:6px 8px;
    border-radius:6px;
    box-shadow:0 8px 24px rgba(2,6,23,0.12);
    font-size:13px;
    transform: translateY(-50%);
    white-space:nowrap;
    z-index:40;
  }
  aside.sidebar.collapsed .nav-item{ position:relative; }
  aside.sidebar.collapsed .nav-item:hover .tooltip{ display:block; }

  /* ---------------- Main app ---------------- */
  main.app{ flex:1; display:flex; flex-direction:column; gap:16px; min-width:0; }

  /* Topbar */
  .topbar{
    display:flex; align-items:center; justify-content:space-between; gap:12px;
  }
  .left{
    display:flex; align-items:center; gap:12px;
  }
  .burger{
    width:46px; height:46px; border-radius:10px; background:var(--card);
    display:grid; place-items:center; cursor:pointer; box-shadow:0 6px 18px rgba(2,6,23,0.05); border:1px solid rgba(2,6,23,0.04);
  }
  .page-title h1{ font-size:20px; margin:0; font-weight:800; }
  .page-title p{ margin:2px 0 0; color:var(--muted); font-size:13px; }

  .right{
    display:flex; align-items:center; gap:10px;
  }
  .icon-btn{
    position:relative;
    width:44px; height:44px; border-radius:10px; background:var(--card); display:grid; place-items:center; cursor:pointer;
    box-shadow:0 6px 18px rgba(2,6,23,0.05); border:1px solid rgba(2,6,23,0.04);
  }
  .profile{
    display:flex; align-items:center; gap:8px; padding:6px 10px; background:var(--card); border-radius:10px; cursor:pointer; border:1px solid rgba(2,6,23,0.04)
  }
  .profile img{ width:36px; height:36px; border-radius:999px; object-fit:cover; }

  /* ---------------- Filters (glass card) ---------------- */
  .filters{
    display:flex; gap:12px; align-items:center; background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(250,250,250,0.95)); padding:12px; border-radius:12px;
    box-shadow:0 8px 28px rgba(2,6,23,0.06); border:1px solid rgba(2,6,23,0.04);
    flex-wrap:wrap;
  }
  .filter{
    display:flex; align-items:center; gap:8px; min-width:170px; padding:8px 10px; border-radius:10px; background:transparent; border:1px solid rgba(2,6,23,0.04)
  }
  .filter i{ color:var(--muted); width:18px; text-align:center }
  .filter select, .filter input{ border:0; background:transparent; outline:0; font-size:14px; color:#111; }
  .filters .actions{ margin-left:auto; display:flex; gap:8px; align-items:center }
  .btn.primary{ background:linear-gradient(90deg,var(--brand-1),var(--brand-2)); color:#fff; padding:9px 12px; border-radius:10px; border:0; cursor:pointer; font-weight:700 }
  .btn.ghost{ padding:8px 10px; border-radius:10px; background:transparent; border:1px solid rgba(2,6,23,0.06); cursor:pointer }

  /* ---------------- Table card ---------------- */
  .card{ background:var(--card); border-radius:var(--radius); padding:12px; box-shadow:var(--shadow); }
  .table-wrap{ overflow:auto; border-radius:10px; }
  table{ width:100%; border-collapse:collapse; min-width:900px; }
  thead th{ position:sticky; top:0; padding:12px 14px; background:linear-gradient(90deg,var(--brand-1),var(--brand-2)); color:#fff; text-align:left; font-weight:800; }
  tbody td{ padding:12px 14px; border-bottom:1px solid rgba(2,6,23,0.04); vertical-align:middle }
  tbody tr{ transition: background .12s; }
  tbody tr:hover{ background:linear-gradient(90deg, rgba(13,110,253,0.03), rgba(13,110,253,0.01)) }
  .col-check{ width:46px }
  .col-more{ width:72px; text-align:center }

  .cand{
    display:flex; gap:12px; align-items:center;
  }
  .avatar{
    width:44px; height:44px; border-radius:8px; display:grid; place-items:center; font-weight:800; color:var(--brand-1);
    background:linear-gradient(90deg,#dbeafe,#e0f2fe);
  }
  .meta{ color:var(--muted); font-size:13px }

  .badge{
    display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-weight:700; font-size:13px;
  }
  .badge.pending{ background: rgba(245,158,11,0.10); color:var(--warning) }
  .badge.approved{ background: rgba(22,163,74,0.08); color:var(--success) }
  .badge.rejected{ background: rgba(220,38,38,0.08); color:var(--danger) }

  .no-data{ padding:30px; text-align:center; color:var(--muted) }

  .modal{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(2,6,23,0.45); z-index:60; padding:24px;
  }
  .modal.show{ display:flex; animation: fadeIn .16s ease both; }
  @keyframes fadeIn{ from { opacity:0; transform: translateY(6px);} to { opacity:1; transform:none; } }

  .modal-inner{ width:100%; max-width:980px; background:var(--card); border-radius:14px; padding:16px; display:flex; gap:18px; box-shadow:0 30px 80px rgba(2,6,23,0.3) }
  .modal-left{ flex:1; min-width:0 }
  .modal-right{ width:320px; display:flex; flex-direction:column; gap:12px }

  .card-section{ background:linear-gradient(180deg,#fff,#fbfbfd); padding:14px; border-radius:10px; border:1px solid rgba(2,6,23,0.04) }
  .card-title{ font-weight:800; margin-bottom:10px }
  .field{ display:flex; justify-content:space-between; padding:8px 6px; border-bottom:1px dashed rgba(2,6,23,0.04) }
  .field:last-child{ border-bottom:0 }
  .field .label{ color:var(--muted); font-size:13px }
  .field .value{ font-weight:700 }

  .doc-row{ display:flex; gap:10px; align-items:center; }
  .doc-thumb{ width:64px; height:60px; border-radius:8px; display:grid; place-items:center; background:linear-gradient(90deg,#e6f5ff,#eaf8ff); color:var(--muted); font-weight:700; border:1px solid rgba(2,6,23,0.03) }

  .actions{ display:flex; flex-direction:column; gap:8px }
  .actions .action{ padding:10px 12px; border-radius:10px; border:0; font-weight:700; cursor:pointer }
  .action.edit{ background: #06b6d4; color:#fff }
  .action.approve{ background: linear-gradient(90deg,#10b981,#059669); color:#fff }
  .action.reject{ background: linear-gradient(90deg,#ef4444,#dc2626); color:#fff }
  .action.export{ background: linear-gradient(90deg,var(--brand-1),var(--brand-2)); color:#fff }

  .tabs{ display:flex; gap:8px; margin-bottom:12px }
  .tab{ padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:700; background:transparent; border:1px solid rgba(2,6,23,0.04) }
  .tab.active{ background: linear-gradient(90deg,var(--brand-1),var(--brand-2)); color:#fff; border:0 }

  @media (max-width:990px){
    aside.sidebar{ display:none }
    .modal-inner{ flex-direction:column }
    .modal-right{ width:100% }
  }
</style>
</head>
<body>

  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar" aria-label="Main navigation">
    <div class="logo">
      <img src="img/logo.png" alt="IMCA logo">
      <div class="brand">IMCA Admin</div>
    </div>

    <nav class="nav" role="navigation" aria-label="Sidebar">
      <div class="nav-item active" data-key="dashboard" tabindex="0">
        <i class="fa fa-gauge-high"></i><span>Dashboard</span>
        <div class="tooltip">Dashboard</div>
      </div>
      <div class="nav-item" data-key="registrations" tabindex="0">
        <i class="fa fa-users"></i><span>Registrations</span>
        <div class="tooltip">Registrations</div>
      </div>
      <div class="nav-item" data-key="courses" tabindex="0">
        <i class="fa fa-book-open"></i><span>Courses</span>
        <div class="tooltip">Courses</div>
      </div>
      <div class="nav-item" data-key="results" tabindex="0">
        <i class="fa fa-award"></i><span>Results</span>
        <div class="tooltip">Results Generator</div>
      </div>
      <div class="nav-item" data-key="exports" tabindex="0">
        <i class="fa fa-file-export"></i><span>Exports</span>
        <div class="tooltip">Exports</div>
      </div>

      <div style="flex:1"></div>

      <div class="nav-item" data-key="settings" tabindex="0">
        <i class="fa fa-gear"></i><span>Settings</span>
        <div class="tooltip">Settings</div>
      </div>
    </nav>

    <div class="sidebar-footer">v1.0 — UI</div>
  </aside>

  <!-- App main -->
  <main class="app" role="main">
    <!-- Topbar -->
    <div class="topbar" role="banner">
      <div class="left">
        <div class="burger" id="burger" title="Toggle sidebar"><i class="fa fa-bars"></i></div>
        <div class="page-title">
          <h1>Registrations</h1>
          <p>Manage all course registrations — review, export and contact candidates</p>
        </div>
      </div>

      <div class="right">
        <div class="icon-btn" id="notifBtn" title="Notifications"><i class="fa fa-bell"></i></div>

        <button class="btn ghost" id="logoutBtn" type="button" style="padding:8px 12px;font-size:13px;">
          <i class="fa fa-right-from-bracket"></i>&nbsp;Logout
        </button>

        <div class="profile" id="profileBtn" title="Profile">
          <img src="https://via.placeholder.com/48" alt="Admin">
          <div style="display:flex;flex-direction:column;align-items:flex-start">
            <div style="font-weight:800;font-size:14px">Admin</div>
            <div style="font-size:13px;color:var(--muted)">Super Admin</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Filters -->
    <section class="filters" aria-label="Filters">
      <div class="filter">
        <i class="fa fa-book"></i>
        <select id="fCourse"><option value="">All courses</option><option>CCS</option><option>CPC</option><option>CRC</option><option>CIC</option><option>IPDRG</option><option>BMCT</option></select>
      </div>

      <div class="filter">
        <i class="fa fa-circle-info"></i>
        <select id="fStatus"><option value="">All status</option><option value="Pending">Pending</option><option value="Approved">Approved</option><option value="Rejected">Rejected</option></select>
      </div>

      <div class="filter">
        <i class="fa fa-calendar-days"></i>
        <input type="date" id="fFrom" />
      </div>

      <div class="filter">
        <i class="fa fa-calendar-days"></i>
        <input type="date" id="fTo" />
      </div>

      <div class="filter" style="min-width:260px">
        <i class="fa fa-magnifying-glass"></i>
        <input type="text" id="fSearch" placeholder="Search name / email / phone" />
      </div>

      <div class="actions">
        <button class="btn primary" id="applyBtn">Apply</button>
        <button class="btn ghost" id="resetBtn">Reset</button>
      </div>
    </section>

    <!-- Table -->
    <section class="card" aria-label="Registration list">
      <div class="table-wrap">
        <table aria-describedby="tabledesc">
          <thead>
            <tr>
              <th class="col-check"><input type="checkbox" id="selectAll"></th>
              <th>Candidate</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Course</th>
              <th>Registered</th>
              <th>Status</th>
              <th class="col-more">Actions</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr data-id="1">
              <td class="col-check"><input type="checkbox" class="row-check"></td>
              <td>
                <div class="cand">
                  <div class="avatar">JD</div>
                  <div>
                    <div style="font-weight:800">John Doe</div>
                    <div class="meta">Father: Rajesh Doe</div>
                  </div>
                </div>
              </td>
              <td>john@example.com</td>
              <td>+91 98765 43210</td>
              <td>CCS</td>
              <td>2025-10-10</td>
              <td><span class="badge pending">Pending</span></td>
              <td class="col-more"><button class="btn ghost" onclick="openModal(event,1)"><i class="fa fa-ellipsis-vertical"></i></button></td>
            </tr>

            <tr data-id="2">
              <td class="col-check"><input type="checkbox" class="row-check"></td>
              <td>
                <div class="cand">
                  <div class="avatar" style="background:linear-gradient(90deg,#ecfccb,#bbf7d0);color:#15803d">JS</div>
                  <div>
                    <div style="font-weight:800">Jane Smith</div>
                    <div class="meta">Father: Suresh Smith</div>
                  </div>
                </div>
              </td>
              <td>jane@example.com</td>
              <td>+91 91234 56780</td>
              <td>CPC</td>
              <td>2025-10-12</td>
              <td><span class="badge approved">Approved</span></td>
              <td class="col-more"><button class="btn ghost" onclick="openModal(event,2)"><i class="fa fa-ellipsis-vertical"></i></button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Results Generator -->
    <section class="card" id="results-section" aria-label="Results generator" style="display:none">
      <div style="display:flex;gap:16px;flex-wrap:wrap">
        <form id="resultForm" style="flex:1;min-width:260px;display:flex;flex-direction:column;gap:10px">
          <h2 style="margin:0 0 4px;font-size:18px;font-weight:800">Result Card Generator</h2>
          <p style="margin:0 0 10px;font-size:13px;color:var(--muted)">
            Create a topper/result card, download it, and save details for the website.
          </p>

          <label style="font-size:13px;font-weight:600">Student photo</label>
          <input type="file" id="resPhoto" accept="image/*" style="padding:6px 8px;border-radius:8px;border:1px solid rgba(15,23,42,0.12)">

          <label style="font-size:13px;font-weight:600;margin-top:4px">Student name</label>
          <input type="text" id="resName" placeholder="Tanuja" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(15,23,42,0.12)">

          <label style="font-size:13px;font-weight:600;margin-top:4px">Batch</label>
          <input type="text" id="resBatch" placeholder="CCS – April 2025" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(15,23,42,0.12)">

          <label style="font-size:13px;font-weight:600;margin-top:4px">Exam name</label>
          <input type="text" id="resExam" value="CCS Exam" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(15,23,42,0.12)">

          <label style="font-size:13px;font-weight:600;margin-top:4px">Score</label>
          <input type="text" id="resScore" placeholder="80.95%" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(15,23,42,0.12)">

          <label style="font-size:13px;font-weight:600;margin-top:4px">Rank / Type</label>
          <select id="resRank" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(15,23,42,0.12)">
            <option value="Topper">Topper</option>
            <option value="Second Place">Second Place</option>
            <option value="Third Place">Third Place</option>
            <option value="Completed Batch">Completed Batch</option>
          </select>

          <label style="font-size:13px;font-weight:600;margin-top:4px">Frame</label>
          <select id="resFrame" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(15,23,42,0.12)">
            <option value="gold">Gold</option>
            <option value="silver">Silver</option>
            <option value="bronze">Bronze</option>
          </select>
        </form>

        <div style="flex:1;min-width:280px;display:flex;justify-content:center;align-items:center">
          <!-- 1:1 square card suited to 1080x1080 export -->
          <div id="resultCard" style="
            width:540px;
            height:540px;
            border-radius:28px;
            background:#ffffff;
            box-shadow:0 26px 70px rgba(15,23,42,0.32);
            position:relative;
            overflow:hidden;
          ">
            <!-- background side bands -->
            <div style="
              position:absolute;left:-60px;top:60px;width:180px;height:420px;
              background:linear-gradient(180deg,#c58c1b,#facc15);
              border-radius:120px;
              opacity:.95;
            "></div>
            <div style="
              position:absolute;right:-60px;top:60px;width:180px;height:420px;
              background:linear-gradient(180deg,#8b5b1a,#facc15);
              border-radius:120px;
              opacity:.95;
            "></div>

            <!-- top gold bar -->
            <div id="resRibbon" style="
              position:absolute;top:0;left:0;right:0;height:110px;
              background:linear-gradient(90deg,#f0b322,#facc15);
              display:flex;align-items:flex-end;justify-content:center;
              padding-bottom:18px;
            ">
              <span style="
                color:#fff;
                font-weight:800;
                font-size:24px;
                letter-spacing:0.18em;
                text-transform:uppercase;
                text-shadow:0 2px 4px rgba(0,0,0,0.35);
              ">CONGRATULATIONS</span>
            </div>

            <!-- IMCA logo top-right -->
            <div style="position:absolute;top:16px;right:24px;display:flex;align-items:center;gap:6px;">
              <img src="img/logo.png" alt="IMCA" style="height:40px;width:auto;border-radius:10px;background:#fff;padding:3px;box-shadow:0 4px 12px rgba(0,0,0,0.18);">
              <span style="font-size:12px;font-weight:800;color:#0f172a;line-height:1.1;text-transform:uppercase;">
                IMCA<br>HEALTHCARE
              </span>
            </div>

            <!-- central white arc behind photo -->
            <div style="
              position:absolute;
              top:120px;
              left:50%;
              transform:translateX(-50%);
              width:410px;
              height:260px;
              border-radius:410px 410px 0 0;
              background:#ffffff;
              box-shadow:0 18px 35px rgba(0,0,0,0.25);
            "></div>

            <!-- photo circle -->
            <div style="
              position:absolute;
              top:155px;
              left:50%;
              transform:translateX(-50%);
              width:320px;
              height:320px;
              border-radius:50%;
              background:#0ea5e9;
              display:flex;align-items:center;justify-content:center;
              overflow:hidden;
              box-shadow:0 14px 30px rgba(0,0,0,0.35);
            ">
              <img id="resPhotoPreview" src="" alt="Student" style="
                width:100%;
                height:100%;
                object-fit:cover;
              ">
            </div>

            <!-- title arc text simulated as straight line -->
            <div style="
              position:absolute;
              top:128px;
              left:50%;
              transform:translateX(-50%);
              width:100%;
              text-align:center;
              font-size:14px;
              font-weight:800;
              letter-spacing:0.32em;
              text-transform:uppercase;
              color:#111827;
            ">
              CERTIFIED&nbsp;CODING&nbsp;SPECIALIST
            </div>

            <!-- name ribbon -->
            <div style="
              position:absolute;
              top:350px;
              left:50%;
              transform:translateX(-50%);
              padding:10px 40px;
              background:#ffffff;
              border-radius:999px;
              box-shadow:0 14px 32px rgba(0,0,0,0.35);
            ">
              <span id="resNameText" style="font-size:22px;font-weight:900;color:#111827;">Student Name</span>
            </div>

            <!-- text block -->
            <div style="
              position:absolute;
              bottom:56px;
              left:50%;
              transform:translateX(-50%);
              width:100%;
              text-align:center;
              padding:0 24px;
            ">
              <div id="resExamText" style="font-size:18px;font-weight:800;color:#111827;margin-bottom:2px;">
                CCS Exam
              </div>
              <div id="resScoreText" style="font-size:18px;font-weight:800;color:#111827;margin-bottom:4px;">
                Score - 80.95%
              </div>
              <div id="resBatchText" style="font-size:14px;color:#374151;margin-bottom:6px;">
                Batch: CCS – April 2025 • <span id="resRankText">Topper</span>
              </div>
              <div style="font-size:14px;color:#111827;">
                Contact +91 8218220183
              </div>
            </div>
          </div>
        </div>
      </div>

      <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
        <button class="btn ghost" type="button" id="saveResultBtn">Save Result (for website)</button>
        <button class="btn primary" type="button" id="downloadCardBtn">Download Card</button>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-inner" role="document">
      <div class="modal-left">
        <div style="display:flex; gap:12px; align-items:center; margin-bottom:10px">
          <div id="mAvatar" style="width:64px;height:64px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(90deg,#dbeafe,#e0f2fe);font-weight:900;color:var(--brand-1);font-size:20px">JD</div>
          <div>
            <div id="mName" style="font-weight:900; font-size:18px">John Doe</div>
            <div id="mSub" class="meta">+91 98765 43210 • john@example.com</div>
          </div>
        </div>

        <div style="display:flex; gap:10px; align-items:center; margin-bottom:12px">
          <div class="tabs" role="tablist">
            <div class="tab active" data-tab="profile" onclick="switchTab('profile')">Profile Info</div>
            <div class="tab" data-tab="docs" onclick="switchTab('docs')">Documents</div>
          </div>
          <div style="margin-left:auto; color:var(--muted); font-size:13px">ID: <span id="mId">1</span></div>
        </div>

        <div id="tabProfile">
          <div class="card-section" style="margin-bottom:12px">
            <div class="card-title">Personal Information</div>
            <div class="field"><div class="label">Full name</div><div class="value" id="f_full">John Doe</div></div>
            <div class="field"><div class="label">Father name</div><div class="value" id="f_father">Rajesh Doe</div></div>
            <div class="field"><div class="label">Age</div><div class="value" id="f_age">25</div></div>
            <div class="field"><div class="label">Qualification</div><div class="value" id="f_qual">Graduation</div></div>
            <div class="field"><div class="label">Experience</div><div class="value" id="f_exp">2 years</div></div>
            <div class="field"><div class="label">Interested Exam</div><div class="value" id="f_exam">CCS</div></div>
            <div class="field"><div class="label">Registered On</div><div class="value" id="f_date">2025-10-10</div></div>
          </div>

          <div class="card-section">
            <div class="card-title">Notes</div>
            <div id="f_notes" style="color:var(--muted)">No additional notes.</div>
          </div>
        </div>

        <div id="tabDocs" style="display:none">
          <div class="card-section" style="margin-bottom:12px">
            <div class="card-title">Uploaded Documents</div>
            <div style="display:flex;flex-direction:column;gap:10px">
              <div class="doc-row">
                <div class="doc-thumb">Aadhaar</div>
                <div style="flex:1">
                  <div style="font-weight:700">Aadhaar (front)</div>
                  <div class="meta">JPEG • 120 KB</div>
                </div>
                <div><button class="btn ghost" style="padding:8px 10px">View</button></div>
              </div>

              <div class="doc-row">
                <div class="doc-thumb">PAN</div>
                <div style="flex:1">
                  <div style="font-weight:700">PAN (front)</div>
                  <div class="meta">PNG • 90 KB</div>
                </div>
                <div><button class="btn ghost" style="padding:8px 10px">View</button></div>
              </div>
            </div>
          </div>

          <div class="card-section">
            <div class="card-title">Document notes</div>
            <div class="meta">Click "View" to preview documents. Download options on the right.</div>
          </div>
        </div>
      </div>

      <aside class="modal-right">
        <div class="card-section">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:800">Actions</div>
            <div class="meta">Quick</div>
          </div>

          <div class="actions">
            <button class="action edit" onclick="onEdit()">Edit</button>
            <button class="action approve" onclick="onApprove()">Approve</button>
            <button class="action reject" onclick="onReject()">Reject</button>
            <button class="action export" onclick="onExport()">Export Excel</button>
            <button class="action" style="background:#111827;color:#fff" onclick="onZip()">Download ZIP</button>
            <button class="action" style="background:transparent;border:1px solid rgba(2,6,23,0.06)" onclick="closeModal()">Close</button>
          </div>
        </div>

        <div class="card-section">
          <div style="font-weight:800;margin-bottom:6px">Summary</div>
          <div class="meta">All fields can be exported as Excel. Photos and documents will be bundled into a ZIP.</div>
        </div>

        <div class="card-section" style="text-align:center">
          <div style="font-weight:800">Last updated</div>
          <div class="meta">2025-10-15</div>
        </div>
      </aside>
    </div>
  </div>

<script>
  const sidebar = document.getElementById('sidebar');
  const burger = document.getElementById('burger');
  burger.addEventListener('click', () => {
    sidebar.classList.toggle('collapsed');
  });

  document.querySelectorAll('.nav-item').forEach(item => {
    item.addEventListener('click', () => {
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      item.classList.add('active');
    });
  });

  const modal = document.getElementById('modal');
  const mId = document.getElementById('mId');
  function openModal(e, id){
    if(e) e.stopPropagation();
    const row = document.querySelector('tr[data-id="' + id + '"]');
    if(!row) return;
    const name = row.querySelector('.cand div div').innerText || 'Candidate';
    const email = row.cells[2].innerText;
    const phone = row.cells[3].innerText;
    const course = row.cells[4].innerText;
    const date = row.cells[5].innerText;

    document.getElementById('mAvatar').innerText = (name.split(' ').map(function(s){return s[0];}).slice(0,2).join('')) || 'CI';
    document.getElementById('mName').innerText = name;
    document.getElementById('mSub').innerText = phone + ' • ' + email;
    mId.innerText = id;
    document.getElementById('f_full').innerText = name;
    document.getElementById('f_father').innerText = row.querySelector('.meta') ? row.querySelector('.meta').innerText.replace('Father: ','') : '—';
    document.getElementById('f_age').innerText = id === 1 ? '25' : '27';
    document.getElementById('f_qual').innerText = id === 1 ? 'Graduation' : 'Post Graduation';
    document.getElementById('f_exp').innerText = id === 1 ? '2 years' : '3 years';
    document.getElementById('f_exam').innerText = course;
    document.getElementById('f_date').innerText = date;
    document.getElementById('f_notes').innerText = id === 1 ? 'No additional notes.' : 'Interested in weekend batches.';

    switchTab('profile');
    modal.classList.add('show');
    modal.setAttribute('aria-hidden','false');
  }

  function closeModal(){
    modal.classList.remove('show');
    modal.setAttribute('aria-hidden','true');
  }
  window.closeModal = closeModal;

  modal.addEventListener('click', function(e){ if(e.target === modal) closeModal(); });
  document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closeModal(); });

  function switchTab(tab){
    document.querySelectorAll('.tab').forEach(function(t){ t.classList.remove('active'); });
    document.querySelectorAll('.tab').forEach(function(t){ if(t.dataset.tab===tab) t.classList.add('active');});
    document.getElementById('tabProfile').style.display = tab==='profile' ? 'block' : 'none';
    document.getElementById('tabDocs').style.display = tab==='docs' ? 'block' : 'none';
  }

  function onEdit(){ alert('Open edit panel (UI placeholder).'); }
  function onApprove(){ alert('Candidate approved (UI placeholder). Update status in backend).'); }
  function onReject(){ alert('Candidate rejected (UI placeholder).'); }
  function onExport(){ alert('Exporting candidate data to Excel (UI placeholder). Use SheetJS to implement).'); }
  function onZip(){ alert('Preparing ZIP of documents (UI placeholder). Use JSZip to implement).'); }

  window.openModal = openModal;

  document.getElementById('applyBtn').addEventListener('click', function(){
    const el = document.querySelector('.filters');
    el.style.boxShadow = '0 12px 40px rgba(13,110,253,0.12)';
    setTimeout(function(){ el.style.boxShadow = '0 8px 28px rgba(2,6,23,0.06)'; }, 800);
  });
  document.getElementById('resetBtn').addEventListener('click', function(){
    document.getElementById('fCourse').value='';
    document.getElementById('fStatus').value='';
    document.getElementById('fFrom').value='';
    document.getElementById('fTo').value='';
    document.getElementById('fSearch').value='';
  });

  document.getElementById('fSearch').addEventListener('input', function(){
    const v = this.value.trim().toLowerCase();
    const rows = document.querySelectorAll('#tbody tr');
    rows.forEach(function(r){
      const name = r.querySelector('.cand div div').innerText.toLowerCase();
      const email = r.cells[2].innerText.toLowerCase();
      const phone = r.cells[3].innerText.toLowerCase();
      const combined = name + ' ' + email + ' ' + phone;
      r.style.display = combined.indexOf(v) !== -1 ? '' : 'none';
    });
  });

  document.getElementById('selectAll').addEventListener('change', function(){
    const checked = this.checked;
    document.querySelectorAll('.row-check').forEach(function(cb){ cb.checked = checked; });
  });

  const sectionMap = { results: 'results-section' };

  document.querySelectorAll('.nav-item').forEach(function(item){
    item.addEventListener('click', function(){
      const key = item.getAttribute('data-key');
      const sectionId = sectionMap[key];
      if (!sectionId) return;

      Object.values(sectionMap).forEach(function(id){
        if (!id) return;
        const el = document.getElementById(id);
        if (el) el.style.display = (id === sectionId) ? 'block' : 'none';
      });
    });
  });

  const resName = document.getElementById('resName');
  const resBatch = document.getElementById('resBatch');
  const resExam = document.getElementById('resExam');
  const resScore = document.getElementById('resScore');
  const resRank = document.getElementById('resRank');
  const resFrame = document.getElementById('resFrame');
  const resPhotoInp = document.getElementById('resPhoto');

  const resNameText = document.getElementById('resNameText');
  const resBatchText = document.getElementById('resBatchText');
  const resExamText = document.getElementById('resExamText');
  const resScoreText = document.getElementById('resScoreText');
  const resPhotoPreview = document.getElementById('resPhotoPreview');
  const resRibbon = document.getElementById('resRibbon');
  const resultCard = document.getElementById('resultCard');

  function syncResultPreview(){
    if(!resNameText) return;
    resNameText.textContent = resName && resName.value ? resName.value : 'Student Name';
    resExamText.textContent = resExam && resExam.value ? resExam.value : 'CCS Exam';
    resScoreText.textContent = resScore && resScore.value ? ('Score - ' + resScore.value) : 'Score - 80.95%';
    const batchVal = resBatch && resBatch.value ? resBatch.value : 'CCS – April 2025';
    const rankVal = resRank && resRank.value ? resRank.value : 'Topper';
    resBatchText.innerHTML = 'Batch: ' + batchVal + ' • <span id="resRankText">' + rankVal + '</span>';
  }

  if (resName) {
    resName.addEventListener('input', syncResultPreview);
    resBatch.addEventListener('input', syncResultPreview);
    resExam.addEventListener('input', syncResultPreview);
    resScore.addEventListener('input', syncResultPreview);
    resRank.addEventListener('change', syncResultPreview);

    resPhotoInp.addEventListener('change', function(){
      const file = this.files && this.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = function(e){ resPhotoPreview.src = e.target.result; };
      reader.readAsDataURL(file);
    });

    resFrame.addEventListener('change', function(){
      let grad = 'linear-gradient(90deg,#f0b322,#facc15)';
      if (this.value === 'silver') grad = 'linear-gradient(90deg,#9ca3af,#e5e7eb)';
      if (this.value === 'bronze') grad = 'linear-gradient(90deg,#92400e,#fbbf24)';
      resRibbon.style.background = grad;
    });

    syncResultPreview();

    document.getElementById('saveResultBtn').addEventListener('click', function(){
      const storeKey = 'imca_results';
      const existing = JSON.parse(localStorage.getItem(storeKey) || '[]');
      existing.push({
        id: Date.now(),
        name: resName.value,
        batch: resBatch.value,
        exam: resExam.value,
        score: resScore.value,
        rank: resRank.value,
        createdAt: new Date().toISOString()
      });
      localStorage.setItem(storeKey, JSON.stringify(existing));
      alert('Result saved (UI only). Connect to backend later for Achievement page.');
    });

    document.getElementById('downloadCardBtn').addEventListener('click', function(){
      if (typeof html2canvas === 'undefined') {
        alert('Add html2canvas script to enable download.');
        return;
      }
      html2canvas(resultCard).then(function(canvas){
        const link = document.createElement('a');
        link.download = (resName.value || 'student') + '_result.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
      });
    });
  }

  document.getElementById('logoutBtn').addEventListener('click', function () {
    window.location.href = 'index.html';
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</body>
</html>
